<html>
  <head>
    <title>Largest Number</title>
    <style>
      .largest {
        color: blue;
      }
    </style>
    <script>
      const promptAsync = (message, onData) =>
        setTimeout(() => onData(prompt(message)), 100);

      const getNumbersContainer = () => document.querySelector(".numbers");

      const createNumberElement = (number) => {
        const numberElement = document.createElement("li");
        numberElement.innerText = number;
        numberElement.classList.add("number");

        return numberElement;
      };

      const displayNumber = (number) => {
        const numbersContainer = getNumbersContainer();
        const numberElement = createNumberElement(number);

        numbersContainer.appendChild(numberElement);
      };

      const promptNumber = () => {};

      const takeNumberInput = (inputsRemaining, onNumber, onComplete) => {
        if (inputsRemaining === 0) {
          onComplete();
          return;
        }

        promptAsync("Enter Number", (number) => {
          onNumber(number);
          takeNumberInput(inputsRemaining - 1, onNumber, onComplete);
        });
      };

      const highlightLargestNumber = (numbers) => {
        const { index } = numbers.reduce(
          (largest, number, index) =>
            largest.number < number ? { number, index } : largest,
          { number: -Infinity, index: -1 }
        );

        console.log(index);

        const numbersContainer = getNumbersContainer();
        numbersContainer.children[index].classList.add("largest");
      };

      const run = () => {
        const numbers = [];

        takeNumberInput(
          10,
          (number) => {
            numbers.push(+number);
            displayNumber(number);
          },
          () => {
            highlightLargestNumber(numbers);
          }
        );
      };

      window.onload = run;
    </script>
  </head>
  <body>
    <h1>Numbers</h1>
    <ul class="numbers"></ul>
  </body>
</html>
