<html>
  <head>
    <title>Largest Number</title>
    <style>
      .highlight {
        color: red;
      }
    </style>
    <script>
      const promptAsync = (message, onData) =>
        setTimeout(() => onData(prompt(message)), 100);

      const getNumbersContainer = () => document.querySelector("#numbers");
      const getAboveContainer = () => document.querySelector("#above");
      const getBelowOrEqualContainer = () =>
        document.querySelector("#below-or-equal");

      const createNumberElement = (number) => {
        const numberElement = document.createElement("li");
        numberElement.innerText = number;
        numberElement.classList.add("number");

        return numberElement;
      };

      const displayNumber = (numberElement) => {
        const numbersContainer = getNumbersContainer();
        numbersContainer.appendChild(numberElement);
      };

      const readNumbers = (remaining, onNumber, onComplete) => {
        if (remaining === 0) {
          onComplete();
          return;
        }

        promptAsync("Enter Number", (number) => {
          onNumber(+number);
          readNumbers(remaining - 1, onNumber, onComplete);
        });
      };

      const highlightLargestNumber = (numbers) => {
        const largestNumber = numbers.reduce((largest, current) =>
          largest.value < current.value ? current : largest
        );

        largestNumber.element.classList.add("highlight");
      };

      const groupNumbers = (numbers, threshold) => {
        const isAboveThreshold = ({ value }) => value > threshold;
        const isBelowOrEqualToThreshold = ({ value }) => value <= threshold;

        const aboveContainer = getAboveContainer();
        const belowOrEqualContainer = getBelowOrEqualContainer();

        numbers
          .filter(isAboveThreshold)
          .forEach(({ element }) => aboveContainer.appendChild(element));

        numbers
          .filter(isBelowOrEqualToThreshold)
          .forEach(({ element }) => belowOrEqualContainer.appendChild(element));
      };

      const collectAndHighlightLargestNumber = () => {
        const numbers = [];

        const addAndDisplayNumber = (value) => {
          const element = createNumberElement(value);
          numbers.push({
            value,
            element,
          });
        };

        promptAsync("Enter Threshold", (threshold) => {
          readNumbers(3, addAndDisplayNumber, () =>
            groupNumbers(numbers, threshold)
          );
        });
      };

      window.onload = collectAndHighlightLargestNumber;
    </script>
  </head>
  <body>
    <!-- <h1>Numbers</h1>
    <ul id="numbers"></ul> -->
    <h2>Below Or Equal To Threshold</h2>
    <ul id="below-or-equal"></ul>
    <h2>Above The Threshold</h2>
    <ul id="above"></ul>
  </body>
</html>
